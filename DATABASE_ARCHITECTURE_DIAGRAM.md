# PHASE 1.4: –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–≤—è–∑–µ–π –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë–î

## üìä –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –ë–î (Entity-Relationship Diagram)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          DATABASE ARCHITECTURE                              ‚îÇ
‚îÇ                              (ct_system)                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


                                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                  ‚îÇ  USER    ‚îÇ
                                  ‚îÇ(users)   ‚îÇ
                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                   ‚îÇ                   ‚îÇ
                    ‚îÇ                   ‚îÇ                   ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  MONITORING        ‚îÇ  ‚îÇ  TRADE      ‚îÇ   ‚îÇ  GROUP        ‚îÇ
         ‚îÇ  (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)      ‚îÇ  ‚îÇ  (—Ç–æ—Ä–≥–æ–≤–ª—è) ‚îÇ   ‚îÇ  (–≥—Ä—É–ø–ø—ã)     ‚îÇ
         ‚îÇ                    ‚îÇ  ‚îÇ             ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ ‚ú® Phase 1.4 New:  ‚îÇ  ‚îÇ ‚ú®Phase 1.4 ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ - ORDERBOOK_DEPTH  ‚îÇ  ‚îÇ   New:      ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ - BATCH_SIZE       ‚îÇ  ‚îÇ - MAX_OPEN  ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ - BATCH_INTERVAL   ‚îÇ  ‚îÇ   _ORDERS   ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ - RING_BUFFER_SZ   ‚îÇ  ‚îÇ - MAX_POS   ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ - SAVE_INTERVAL    ‚îÇ  ‚îÇ   _SIZE     ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ                    ‚îÇ  ‚îÇ - STRATEGY  ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ (6 + 5 new cols)   ‚îÇ  ‚îÇ - SLIPPAGE  ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ ‚úÖ 7 records       ‚îÇ  ‚îÇ - BACKTEST  ‚îÇ   ‚îÇ (2 records)   ‚îÇ
         ‚îÇ                    ‚îÇ  ‚îÇ             ‚îÇ   ‚îÇ               ‚îÇ
         ‚îÇ üîó PK: ID          ‚îÇ  ‚îÇ üîó PK: ID   ‚îÇ   ‚îÇ üîó PK: ID     ‚îÇ
         ‚îÇ üîó FK: UID‚ÜíUSER    ‚îÇ  ‚îÇ üîó FK: UID‚Üí ‚îÇ   ‚îÇ üîó FK:        ‚îÇ
         ‚îÇ                    ‚îÇ  ‚îÇ   USER      ‚îÇ   ‚îÇ CREATED‚ÜíUSER  ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ-‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ üîó FK:      ‚îÇ   ‚îÇ MODIFY‚ÜíUSER   ‚îÇ
                   ‚îÇ             ‚îÇ   TYPE‚Üí     ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ             ‚îÇ   TRADE_TYP ‚îÇ
                   ‚îÇ             ‚îÇ   E         ‚îÇ
                   ‚îÇ             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ                    ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ-‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇMONITORING_SPOT_     ‚îÇ  ‚îÇ  TRADE_SPOT_        ‚îÇ
        ‚îÇARRAYS               ‚îÇ  ‚îÇ  ARRAYS  (‚≠ê NEW)   ‚îÇ
        ‚îÇ                     ‚îÇ  ‚îÇ                     ‚îÇ
        ‚îÇ üîó FK: MONITOR_ID‚Üí  ‚îÇ  ‚îÇ üîó FK: TRADE_ID‚Üí    ‚îÇ
        ‚îÇ       MONITORING    ‚îÇ  ‚îÇ       TRADE         ‚îÇ
        ‚îÇ üîó FK: PAIR_ID‚Üí     ‚îÇ  ‚îÇ üîó FK: PAIR_ID‚Üí     ‚îÇ
        ‚îÇ       SPOT_TRADE_   ‚îÇ  ‚îÇ       SPOT_TRADE    ‚îÇ
        ‚îÇ       PAIR          ‚îÇ  ‚îÇ üîó FK: EAID‚Üí        ‚îÇ
        ‚îÇ                     ‚îÇ  ‚îÇ       EXCHANGE_     ‚îÇ
        ‚îÇ (junction table)    ‚îÇ  ‚îÇ       ACCOUNTS      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ (8 records)         ‚îÇ
                  ‚îÇ              ‚îÇ                     ‚îÇ
                  ‚îÇ              ‚îÇ START_AMOUNT_BASE   ‚îÇ
                  ‚îÇ              ‚îÇ START_AMOUNT_QUOTE  ‚îÇ
                  ‚îÇ              ‚îÇ MIN_DELTA_PROFIT    ‚îÇ
                  ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ-‚îÄ‚îò
                  ‚îÇ                         ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  SPOT_TRADE_PAIR       ‚îÇ
                    ‚îÇ  (—Ç–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä—ã)       ‚îÇ
                    ‚îÇ                        ‚îÇ
                    ‚îÇ üîó FK: (COIN_ID,       ‚îÇ
                    ‚îÇ        COIN_ID_QUOTE)  ‚îÇ
                    ‚îÇ üîó FK: CHAIN_ID        ‚îÇ
                    ‚îÇ                        ‚îÇ
                    ‚îÇ (1000+ pairs)          ‚îÇ
                    ‚îÇ PK: ID                 ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ                      ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  COIN            ‚îÇ   ‚îÇ  SPOT_TRADE_PAIR_ ‚îÇ
         ‚îÇ  (–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã)  ‚îÇ   ‚îÇ  FEE              ‚îÇ
         ‚îÇ                  ‚îÇ   ‚îÇ  (–∫–æ–º–∏—Å—Å–∏–∏)       ‚îÇ
         ‚îÇ (3000+ coins)    ‚îÇ   ‚îÇ                   ‚îÇ
         ‚îÇ                  ‚îÇ   ‚îÇ üîó FK: PAIR_ID‚Üí   ‚îÇ
         ‚îÇ PK: ID           ‚îÇ   ‚îÇ       SPOT_TRADE  ‚îÇ
         ‚îÇ INDEX: SYMBOL    ‚îÇ   ‚îÇ       _PAIR       ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  CHAIN           ‚îÇ
         ‚îÇ  (–±–ª–æ–∫—á–µ–π–Ω —Å–µ—Ç–∏) ‚îÇ
         ‚îÇ                  ‚îÇ
         ‚îÇ ETH, BNB, SOL... ‚îÇ
         ‚îÇ (330+ chains)    ‚îÇ
         ‚îÇ                  ‚îÇ
         ‚îÇ PK: ID           ‚îÇ
         ‚îÇ UNIQUE: NAME     ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           EXCHANGE & ACCOUNTS (–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  EXCHANGE        ‚îÇ
         ‚îÇ  (–±–∏—Ä–∂–∏)         ‚îÇ
         ‚îÇ                  ‚îÇ
         ‚îÇ Binance, Bybit   ‚îÇ
         ‚îÇ OKX, Kucoin...   ‚îÇ
         ‚îÇ (8 exchanges)    ‚îÇ
         ‚îÇ                  ‚îÇ
         ‚îÇ PK: ID           ‚îÇ
         ‚îÇ NAME             ‚îÇ
         ‚îÇ BASE_URL         ‚îÇ
         ‚îÇ WEBSOCKET_URL    ‚îÇ
         ‚îÇ CLASS_TO_FACTORY ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  EXCHANGE_ACCOUNTS    ‚îÇ
         ‚îÇ  (API –∫–ª—é—á–∏)          ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ üîó FK: EXID‚ÜíEXCHANGE  ‚îÇ
         ‚îÇ üîó FK: UID‚ÜíUSER       ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ (9 records)           ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ API_KEY               ‚îÇ
         ‚îÇ SECRET_KEY            ‚îÇ
         ‚îÇ ADD_KEY               ‚îÇ
         ‚îÇ PRIORITY              ‚îÇ
         ‚îÇ ACTIVE                ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    ‚ú® NEW PHASE 1.4 TABLES                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  TRADE_HISTORY          ‚îÇ  üÜï NEW TABLE
         ‚îÇ  (–∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫)       ‚îÇ
         ‚îÇ                         ‚îÇ
         ‚îÇ PK: ID (bigint)         ‚îÇ
         ‚îÇ üîó FK: TRADE_ID         ‚îÇ
         ‚îÇ üîó FK: PAIR_ID          ‚îÇ
         ‚îÇ üîó FK: EAID             ‚îÇ
         ‚îÇ                         ‚îÇ
         ‚îÇ ORDER_ID (–æ—Ç –±–∏—Ä–∂–∏)     ‚îÇ
         ‚îÇ SIDE (BUY/SELL)         ‚îÇ
         ‚îÇ PRICE, QUANTITY         ‚îÇ
         ‚îÇ COMMISSION              ‚îÇ
         ‚îÇ EXECUTED_TIME (–º–∏–∫—Ä–æ—Å–µ–∫)‚îÇ
         ‚îÇ STATUS                  ‚îÇ
         ‚îÇ PROFIT_LOSS             ‚îÇ
         ‚îÇ                         ‚îÇ
         ‚îÇ üìå –ö–ª—é—á–µ–≤–æ–π –∏–Ω–¥–µ–∫—Å:     ‚îÇ
         ‚îÇ (TRADE_ID, EXEC_TIME)   ‚îÇ
         ‚îÇ                         ‚îÇ
         ‚îÇ ‚è≥ –†–∞—Å—Ç—É—â–∞—è —Ç–∞–±–ª–∏—Ü–∞!    ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  DAEMON_STATE         ‚îÇ  üÜï NEW TABLE
         ‚îÇ  (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–º–æ–Ω–æ–≤)  ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ PK: ID                ‚îÇ
         ‚îÇ UNIQUE: DAEMON_NAME   ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ STATUS                ‚îÇ
         ‚îÇ (STARTING/RUNNING/...)‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ ROLE                  ‚îÇ
         ‚îÇ (MONITOR/TRADER/BOTH) ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ LAST_HEARTBEAT        ‚îÇ
         ‚îÇ (–º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã)        ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ üîó FK: ACTIVE_MON_ID‚Üí ‚îÇ
         ‚îÇ        MONITORING     ‚îÇ
         ‚îÇ üîó FK: ACTIVE_TRADE_ID‚îÇ
         ‚îÇ        TRADE          ‚îÇ
         ‚îÇ                       ‚îÇ
         ‚îÇ üìå –î–ª—è graceful       ‚îÇ
         ‚îÇ    shutdown & recovery‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              POSITION & TRANSACTION TABLES                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  POS_POSITIONS    ‚îÇ
         ‚îÇ  (–æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏)
         ‚îÇ                   ‚îÇ
         ‚îÇ üîó FK: PAIR_ID    ‚îÇ
         ‚îÇ ENTRY_PRICE       ‚îÇ
         ‚îÇ ENTRY_SIZE        ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  POS_TRANSACTIONS    ‚îÇ
         ‚îÇ  (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π)|
         ‚îÇ                      ‚îÇ
         ‚îÇ üîó FK: POS_ID        ‚îÇ
         ‚îÇ SIDE                 ‚îÇ
         ‚îÇ AMOUNT               ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          REFERENCE & ANALYTICS TABLES                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ARBITRAGE_TRANS   ‚îÇ  ‚îÇ  PRICE_SPOT_LOG  ‚îÇ  ‚îÇ  TRADE_TYPE         ‚îÇ
‚îÇ  (–∞—Ä–±–∏—Ç—Ä–∞–∂)        ‚îÇ  ‚îÇ  (–∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω)   ‚îÇ  ‚îÇ  (—Ç–∏–ø—ã —Ç–æ—Ä–≥–æ–≤–ª–∏)    ‚îÇ
‚îÇ                    ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ üîó FK: TRADE_ID    ‚îÇ  ‚îÇ üîó FK: PAIR_ID   ‚îÇ  ‚îÇ Limit, Market, etc  ‚îÇ
‚îÇ üîó FK: STATUS_ID   ‚îÇ  ‚îÇ PRICE            ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ AMOUNT             ‚îÇ  ‚îÇ VOLUME_24H       ‚îÇ  ‚îÇ PK: ID              ‚îÇ
‚îÇ CALC_PROFIT        ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ NAME                ‚îÇ
‚îÇ                    ‚îÇ  ‚îÇ ‚è≥ –†–∞—Å—Ç—É—â–∞—è!     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ (80 records)       ‚îÇ  ‚îÇ (1000+ –≤ –¥–µ–Ω—å)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ARBITRAGE_TRANS_   ‚îÇ  ‚îÇ  UPDATE_STATUS   ‚îÇ  ‚îÇ  VERSION_DB         ‚îÇ
‚îÇ  STATUS             ‚îÇ  ‚îÇ  (—Å—Ç–∞—Ç—É—Å—ã –æ–±–Ω.)  ‚îÇ  ‚îÇ  (–≤–µ—Ä—Å–∏—è –ë–î)        ‚îÇ
‚îÇ  (—Å—Ç–∞—Ç—É—Å—ã –∞—Ä–±.)     ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ                     ‚îÇ  ‚îÇ Pending, Waiting ‚îÇ  ‚îÇ version_number      ‚îÇ
‚îÇ Profitable, Failed..‚îÇ  ‚îÇ Done, etc        ‚îÇ  ‚îÇ install_date        ‚îÇ
‚îÇ                     ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                     ‚îÇ
‚îÇ (9 records)         ‚îÇ  ‚îÇ (4 records)      ‚îÇ  ‚îÇ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WITHDRAWAL         ‚îÇ
‚îÇ  (–≤—ã–≤–æ–¥—ã —Å—Ä–µ–¥—Å—Ç–≤)   ‚îÇ
‚îÇ                     ‚îÇ
‚îÇ üîó FK: UID          ‚îÇ
‚îÇ üîó FK: EXID         ‚îÇ
‚îÇ CHAIN_ID            ‚îÇ
‚îÇ ADDRESS             ‚îÇ
‚îÇ AMOUNT              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  USER MANAGEMENT (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  USER        ‚îÇ
         ‚îÇ  (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
         ‚îÇ              ‚îÇ
         ‚îÇ ID           ‚îÇ
         ‚îÇ NAME         ‚îÇ
         ‚îÇ EMAIL        ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  USERS_GROUP       ‚îÇ
    ‚îÇ  (—Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–≥—Ä—É–ø–ø–∞)
    ‚îÇ                    ‚îÇ
    ‚îÇ üîó FK: UID‚ÜíUSER    ‚îÇ
    ‚îÇ üîó FK: GID‚ÜíGROUP   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  INDEXES & PERFORMANCE                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚ú® –ö–ª—é—á–µ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã Phase 1.4:

MONITORING:
  - PRIMARY KEY (ID)
  - INDEX (UID, ACTIVE)  ‚Üê –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
  - INDEX (ACTIVE, ID)

TRADE:
  - PRIMARY KEY (ID)
  - INDEX (UID, ACTIVE)  ‚Üê –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
  - INDEX (ACTIVE, ID)

TRADE_HISTORY:
  - PRIMARY KEY (ID)
  - INDEX (TRADE_ID)             ‚Üê –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É
  - INDEX (EXECUTED_TIME)        ‚Üê –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–∑–æ–≤
  - INDEX (ORDER_ID)             ‚Üê –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–¥–µ–ª–∫–∏
  - INDEX (TRADE_ID, EXEC_TIME)  ‚Üê —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å!

DAEMON_STATE:
  - PRIMARY KEY (ID)
  - UNIQUE KEY (DAEMON_NAME)     ‚Üê –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–¥–Ω–æ–≥–æ –¥–µ–º–æ–Ω–∞
  - INDEX (STATUS)               ‚Üê –¥–ª—è –ø–æ–∏—Å–∫–∞ –º–µ—Ä—Ç–≤—ã—Ö –¥–µ–º–æ–Ω–æ–≤
  - INDEX (LAST_HEARTBEAT)       ‚Üê –¥–ª—è cleanup —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              DATA FLOW & RELATIONSHIPS                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

USER —Å–æ–∑–¥–∞–µ—Ç MONITORING –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
  USER(ID=1) ‚Üí MONITORING(ID=1, UID=1)
    ‚Üì
  –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–∞—Ä—ã —á–µ—Ä–µ–∑ MONITORING_SPOT_ARRAYS:
    MONITORING(1) ‚Üí [SPOT_TRADE_PAIR(1), SPOT_TRADE_PAIR(2)...]
    ‚Üì
  –ö–∞–∂–¥–∞—è –ø–∞—Ä–∞ —Å–≤—è–∑–∞–Ω–∞ —Å COIN –∏ CHAIN:
    SPOT_TRADE_PAIR(1) ‚Üí COIN(BTC), COIN(USDT), CHAIN(mainnet)


USER —Å–æ–∑–¥–∞–µ—Ç TRADE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
  USER(ID=1) ‚Üí TRADE(ID=1, UID=1)
    ‚Üì
  –¢–æ—Ä–≥–æ–≤–ª—è –ø–æ –ø–∞—Ä–∞–º —á–µ—Ä–µ–∑ TRADE_SPOT_ARRAYS:
    TRADE(1) ‚Üí [
      {PAIR_ID=1, EAID=1},
      {PAIR_ID=2, EAID=2}
    ]
    ‚Üì
  –ö–∞–∂–¥—ã–π –æ—Ä–¥–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ TRADE_HISTORY:
    TRADE(1) ‚Üí TRADE_HISTORY (–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫)
    ‚Üì
  –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤ DAEMON_STATE:
    DAEMON_STATE(ACTIVE_TRADE_ID=1) ‚Üî TRADE(1)


DAEMON_STATE –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª:
  [STARTING] ‚Üí [RUNNING] ‚Üí [STOPPING] ‚Üí [STOPPED]
    ‚Üì
  –•—Ä–∞–Ω–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
    DAEMON_STATE.ACTIVE_MONITORING_ID = MONITORING.ID
    DAEMON_STATE.ACTIVE_TRADE_ID = TRADE.ID
    ‚Üì
  –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç heartbeat –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥ (–º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã):
    UPDATE DAEMON_STATE SET LAST_HEARTBEAT = now_microseconds()


‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              STATISTICS & CAPACITY                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–¢–∞–±–ª–∏—Ü–∞           –¢–µ–∫—É—â–∏–µ   –û–∂–∏–¥–∞–µ–º—ã–µ    –†–∞—Å—Ç—É—â–∞—è?  –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
COIN              3000+     5000+        –î–∞         CoinMarketCap
CHAIN             330+      500+         –î–∞         New chains
SPOT_TRADE_PAIR   1000+     5000+        –î–∞         –í—Å–µ –ø–∞—Ä—ã –±–∏—Ä–∂
DEPOSIT           458K+     1M+          –î–∞         –í—Å–µ –¥–µ–ø–æ–∑–∏—Ç—ã
MONITORING        7         100          –ú–µ–¥–ª–µ–Ω–Ω–æ    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏
TRADE             8         100          –ú–µ–¥–ª–µ–Ω–Ω–æ    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏
TRADE_HISTORY     0         1000000+     –î–ê! üî•     –†–ê–°–¢–ï–¢ –ë–´–°–¢–†–û!
PRICE_SPOT_LOG    ?         1000+/–¥–µ–Ω—å   –î–ê! üî•     –†–ê–°–¢–ï–¢ –ë–´–°–¢–†–û!
DAEMON_STATE      0         100          –ú–µ–¥–ª–µ–Ω–Ω–æ    –î–µ–º–æ–Ω—ã-–ø—Ä–æ—Ü–µ—Å—Å—ã


üìä –†–ê–ó–ú–ï–†–´ –¢–ê–ë–õ–ò–¶ (–ø—Ä–∏–º–µ—Ä–Ω—ã–µ):

–¢–∞–±–ª–∏—Ü–∞           –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏  –¢–µ–∫—É—â–∏–π –æ–±—ä–µ–º  –ù–∞ –≥–æ–¥
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TRADE_HISTORY     ~200 bytes           ~1 MB          ~365 GB üî•
PRICE_SPOT_LOG    ~150 bytes           ~1 MB          ~150 GB üî•

üí° –í–´–í–û–î: TRADE_HISTORY –∏ PRICE_SPOT_LOG —Ç—Ä–µ–±—É—é—Ç –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è!
          –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –¥–∞—Ç–µ!

```

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö

```
1Ô∏è‚É£ –°–û–ó–î–ê–ù–ò–ï –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò:
   
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí UI
        ‚Üì
   INSERT INTO MONITORING (UID, ORDERBOOK_DEPTH, ...)
        ‚Üì
   INSERT INTO MONITORING_SPOT_ARRAYS (MONITOR_ID, PAIR_ID)
        ‚Üì
   ‚úÖ MONITORING –≥–æ—Ç–æ–≤–æ–π –∫ –∑–∞–ø—É—Å–∫—É

2Ô∏è‚É£ –ó–ê–ü–£–°–ö –î–ï–ú–û–ù–ê:

     go run main.go --config config.yaml
        ‚Üì
     –î–µ–º–æ–Ω –ø–∞—Ä—Å–∏—Ç config.yaml ‚Üí MonitorConfig struktura
        ‚Üì
   SELECT * FROM MONITORING WHERE ID = config_id AND ACTIVE = 1
        ‚Üì
   INSERT INTO DAEMON_STATE (DAEMON_NAME, STATUS=STARTING, ...)
        ‚Üì
   [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è]
        ‚Üì
   UPDATE DAEMON_STATE SET STATUS = 'RUNNING', LAST_HEARTBEAT = now()
        ‚Üì
   ‚úÖ –î–µ–º–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç

3Ô∏è‚É£ –î–ê–ù–ù–´–ï –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê:

   while daemon.running {
       TickerOrder book data from birzha
            ‚Üì
       Cache –≤ ring buffer (RingBufferSize)
            ‚Üì
       if batch_size_reached || timeout_reached {
           INSERT INTO PRICE_SPOT_LOG (pair_id, price, volume, ...)
           INSERT INTO MONITORING_SPOT_ARRAYS updates
       }
            ‚Üì
       Heartbeat UPDATE DAEMON_STATE
   }

4Ô∏è‚É£ –¢–û–†–ì–û–í–õ–Ø –ò –°–î–ï–õ–ö–ò:

   while trader.running {
       –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞
            ‚Üì
       CREATE ORDER –Ω–∞ –±–∏—Ä–∂–µ
            ‚Üì
       Get ORDER_ID –æ—Ç –±–∏—Ä–∂–∏
            ‚Üì
       if order.filled {
           INSERT INTO TRADE_HISTORY (ORDER_ID, SIDE, PRICE, QTY, ...)
           if matched_with_previous_order {
               UPDATE PROFIT_LOSS
           }
       }
            ‚Üì
       EXEC happens on EXCHANGE_ACCOUNTS API
   }

5Ô∏è‚É£ –û–°–¢–ê–ù–û–í–ö–ê –î–ï–ú–û–ù–ê:

   signal: SIGTERM/SIGINT
        ‚Üì
   UPDATE DAEMON_STATE SET STATUS = 'STOPPING'
        ‚Üì
   Graceful shutdown (30 sec timeout)
        ‚Üì
   Flush all pending data to TRADE_HISTORY
        ‚Üì
   UPDATE DAEMON_STATE SET STATUS = 'STOPPED'
        ‚Üì
   Close DB connections
        ‚Üì
   Exit process
```

---

## üíæ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–∏–∑ config.yaml)

```yaml
database:
     type: mysql                    # MySQL/PostgreSQL
     host: localhost
     port: 3306
     username: ct_system_user
     password: *****
     database: ct_system
     max_open_conns: 20             # Connection pool
     max_idle_conns: 5

role:
     type: both                     # monitor, trader, –∏–ª–∏ both
     monitoring_config_id: 1        # ID –∏–∑ MONITORING —Ç–∞–±–ª–∏—Ü—ã
     trade_config_id: 1             # ID –∏–∑ TRADE —Ç–∞–±–ª–∏—Ü—ã
     daemon_name: prod-daemon-1     # –î–ª—è DAEMON_STATE

clickhouse:
     host: clickhouse.internal
     port: 9000
     database: analytics
     username: default
     password: *****
     max_batch_size: 10000
     replication_factor: 2          # –î–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
```

---

## üéØ –ó–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Phase 1.4)

```sql
-- 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–º–æ–Ω–æ–≤
SELECT daemon_name, status, role, last_heartbeat, 
       CAST(active_monitoring_id AS CHAR) as mon_id,
       CAST(active_trade_id AS CHAR) as trade_id
FROM DAEMON_STATE
ORDER BY last_heartbeat DESC;

-- 2. –ù–∞–π—Ç–∏ –º–µ—Ä—Ç–≤—ã–µ –¥–µ–º–æ–Ω—ã (–Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å > 5 –º–∏–Ω—É—Ç)
SELECT daemon_name, last_heartbeat, status
FROM DAEMON_STATE
WHERE last_heartbeat < (UNIX_TIMESTAMP() * 1000000 - 300000000)
  AND status = 'RUNNING';

-- 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫ –∑–∞ –¥–µ–Ω—å
SELECT DATE(FROM_UNIXTIME(executed_time / 1000000)) as trade_date,
       trade_id, side, COUNT(*) as count,
       SUM(quantity) as total_qty, AVG(price) as avg_price,
       SUM(CAST(profit_loss AS DECIMAL)) as total_pnl
FROM TRADE_HISTORY
WHERE executed_time > (UNIX_TIMESTAMP(CURDATE()) * 1000000)
GROUP BY DATE(FROM_UNIXTIME(executed_time / 1000000)), trade_id, side;

-- 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –ø–∞—Ä–∞–º–∏
SELECT m.id, m.orderbook_depth, m.batch_size, m.batch_interval_sec,
       m.ring_buffer_size, m.save_interval_sec,
       GROUP_CONCAT(stp.pair_id) as pair_ids
FROM MONITORING m
LEFT JOIN MONITORING_SPOT_ARRAYS msa ON m.id = msa.monitor_id
LEFT JOIN SPOT_TRADE_PAIR stp ON msa.pair_id = stp.id
WHERE m.active = 1
GROUP BY m.id;

-- 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
SELECT t.id, t.uid, t.max_open_orders, t.max_position_size,
       t.default_strategy, t.strategy_update_interval_sec,
       t.slippage_percent, t.enable_backtest,
       GROUP_CONCAT(CONCAT(stp.id, ':', ea.account_name)) as accounts_pairs
FROM TRADE t
LEFT JOIN TRADE_SPOT_ARRAYS tsa ON t.id = tsa.trade_id
LEFT JOIN SPOT_TRADE_PAIR stp ON tsa.pair_id = stp.id
LEFT JOIN EXCHANGE_ACCOUNTS ea ON tsa.eaid = ea.id
WHERE t.active = 1
GROUP BY t.id;
```

